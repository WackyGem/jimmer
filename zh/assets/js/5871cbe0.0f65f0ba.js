"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[419],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>E});var l=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,l,o=function(e,t){if(null==e)return{};var n,l,o={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=l.createContext({}),i=function(e){var t=l.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=i(e.components);return l.createElement(m.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},d=l.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,m=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),d=i(n),E=o,p=d["".concat(m,".").concat(E)]||d[E]||s[E]||r;return n?l.createElement(p,a(a({ref:t},u),{},{components:n})):l.createElement(p,a({ref:t},u))}));function E(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,a=new Array(r);a[0]=d;var c={};for(var m in t)hasOwnProperty.call(t,m)&&(c[m]=t[m]);c.originalType=e,c.mdxType="string"==typeof e?e:o,a[1]=c;for(var i=2;i<r;i++)a[i]=n[i];return l.createElement.apply(null,a)}return l.createElement.apply(null,n)}d.displayName="MDXCreateElement"},72882:(e,t,n)=>{n.d(t,{Z:()=>k});var l=n(83117),o=n(80102),r=n(67294),a=n(93680),c=n(94780),m=n(71657),i=n(90948),u=n(1588),s=n(34867);function d(e){return(0,s.Z)("MuiTableContainer",e)}(0,u.Z)("MuiTableContainer",["root"]);var E=n(85893);const p=["className","component"],Z=(0,i.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),k=r.forwardRef((function(e,t){const n=(0,m.Z)({props:e,name:"MuiTableContainer"}),{className:r,component:i="div"}=n,u=(0,o.Z)(n,p),s=(0,l.Z)({},n,{component:i}),k=(e=>{const{classes:t}=e;return(0,c.Z)({root:["root"]},d,t)})(s);return(0,E.jsx)(Z,(0,l.Z)({ref:t,as:i,className:(0,a.Z)(k.root,r),ownerState:s},u))}))},82276:(e,t,n)=>{n.d(t,{P:()=>Z,Zq:()=>k,x7:()=>h});var l=n(83117),o=n(67294),r=n(39511),a=n(90629),c=n(7906),m=n(295),i=n(53252),u=n(72882),s=n(53184),d=n(53816),E=n(53143),p=n(32102);const Z=(0,o.memo)((()=>(0,E.S)()?o.createElement(r.b,{buttonText:"\u7b80\u8981\u4e86\u89e3",title:"\u7f13\u5b58\u4e00\u81f4\u6027",variant:"outlined"},f):o.createElement(r.b,{buttonText:"A Brief Introduction",title:"Cache Consistency",variant:"outlined"},y))),k=(0,o.memo)((e=>(0,E.S)()?o.createElement(p.s,(0,l.Z)({title:"\u7f13\u5b58\u4e00\u81f4\u6027"},e),f):o.createElement(p.s,(0,l.Z)({title:"Cache Consistency"},e),y))),h=(0,o.memo)((()=>(0,E.S)()?f:y)),b=n(94233).Z,f=o.createElement(o.Fragment,null,o.createElement("p",null,o.createElement("img",{src:b})),o.createElement("p",null,o.createElement("b",null,"\u5de6\u4fa7"),"\uff1a\u4fee\u6539\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\uff0c\u5c06",o.createElement("code",null,"Book-10"),"\u7684\u5916\u5efa\u5b57\u6bb5",o.createElement("code",null,"STORE_ID"),"\u4ece",o.createElement("code",null,"2"),"\u4fee\u6539\u4e3a",o.createElement("code",null,"1")),o.createElement("p",null,o.createElement("b",null,"\u53f3\u4fa7"),"\uff1a\u6b64\u4e3e\u4f1a\u5bfc\u81f4\u8fde\u9501\u53cd\u5e94\uff0cJimmer\u4f1a\u81ea\u52a8\u6e05\u7406\u6240\u6709\u53d7\u5f71\u54cd\u7684\u7f13\u5b58\uff0c\u6e05\u7406\u7f13\u5b58\u7684\u52a8\u4f5c\u4f1a\u5728IDE\u4e2d\u7559\u4e0b\u65e5\u5fd7\u8bb0\u5f55",o.createElement("div",{style:{padding:"1rem",marginLeft:"2rem"}},o.createElement(u.Z,{component:a.Z},o.createElement(c.Z,null,o.createElement(s.Z,null,o.createElement(d.Z,null,o.createElement(i.Z,null,"\u88ab\u6e05\u7406\u7684\u7f13\u5b58\u540d"),o.createElement(i.Z,null,o.createElement("span",{style:{whiteSpace:"nowrap"}},"\u7f13\u5b58\u7c7b\u578b")),o.createElement(i.Z,null,"\u63cf\u8ff0"))),o.createElement(m.Z,null,o.createElement(d.Z,null,o.createElement(i.Z,null,"Book-10"),o.createElement(i.Z,null,"\u5bf9\u8c61\u7f13\u5b58"),o.createElement(i.Z,null,"\u5bf9\u4e8e\u88ab\u4fee\u6539\u7684\u4e66\u7c4d",o.createElement("code",null,"Book-10"),"\u800c\u8a00\uff0c\u5176\u5bf9\u8c61\u7f13\u5b58\u5931\u6548")),o.createElement(d.Z,null,o.createElement(i.Z,null,"Book.store-10"),o.createElement(i.Z,null,"\u5173\u8054\u7f13\u5b58"),o.createElement(i.Z,null,"\u5bf9\u4e8e\u88ab\u4fee\u6539\u7684\u4e66\u7c4d",o.createElement("code",null,"Book-10"),"\u800c\u8a00\uff0c\u5176many-to-one\u5173\u8054\u5c5e\u6027",o.createElement("code",null,"Book.store"),"\u6240\u5bf9\u5e94\u7684\u7f13\u5b58\u5931\u6548")),o.createElement(d.Z,null,o.createElement(i.Z,null,"BookStore.books-2"),o.createElement(i.Z,null,"\u5173\u8054\u7f13\u5b58"),o.createElement(i.Z,null,"\u5bf9\u4e8e\u65e7\u7684\u7236\u5bf9\u8c61",o.createElement("code",null,"BookStore-2"),"\u800c\u8a00\uff0c\u5176one-to-many\u5173\u8054\u5c5e\u6027",o.createElement("code",null,"BookStore.books"),"\u6240\u5bf9\u5e94\u7684\u7f13\u5b58\u5931\u6548")),o.createElement(d.Z,null,o.createElement(i.Z,{style:{whiteSpace:"nowrap"}},"BookStore.newestBooks-2"),o.createElement(i.Z,null,"\u8ba1\u7b97\u7f13\u5b58"),o.createElement(i.Z,null,"\u5bf9\u4e8e\u65e7\u7684\u7236\u5bf9\u8c61",o.createElement("code",null,"BookStore-2"),"\u800c\u8a00\uff0c\u5176\u5173\u8054\u578b\u8ba1\u7b97\u5c5e\u6027",o.createElement("code",null,"BookStore.newestBooks"),"\u6240\u5bf9\u5e94\u7684\u7f13\u5b58\u5931\u6548")),o.createElement(d.Z,null,o.createElement(i.Z,null,"BookStore.avgPrice-2"),o.createElement(i.Z,null,"\u8ba1\u7b97\u7f13\u5b58"),o.createElement(i.Z,null,"\u5bf9\u4e8e\u65e7\u7684\u7236\u5bf9\u8c61",o.createElement("code",null,"BookStore-2"),"\u800c\u8a00\uff0c\u5176\u5173\u7edf\u8ba1\u578b\u8ba1\u7b97\u5c5e\u6027",o.createElement("code",null,"BookStore.avgPrice"),"\u6240\u5bf9\u5e94\u7684\u7f13\u5b58\u5931\u6548")),o.createElement(d.Z,null,o.createElement(i.Z,null,"BookStore.books-1"),o.createElement(i.Z,null,"\u5173\u8054\u7f13\u5b58"),o.createElement(i.Z,null,"\u5bf9\u4e8e\u65b0\u7684\u7236\u5bf9\u8c61",o.createElement("code",null,"BookStore-1"),"\u800c\u8a00\uff0c\u5176one-to-many\u5173\u8054\u5c5e\u6027",o.createElement("code",null,"BookStore.books"),"\u6240\u5bf9\u5e94\u7684\u7f13\u5b58\u5931\u6548")),o.createElement(d.Z,null,o.createElement(i.Z,null,"BookStore.newestBooks-1"),o.createElement(i.Z,null,"\u8ba1\u7b97\u7f13\u5b58"),o.createElement(i.Z,null,"\u5bf9\u4e8e\u65b0\u7684\u7236\u5bf9\u8c61",o.createElement("code",null,"BookStore-1"),"\u800c\u8a00\uff0c\u5176\u5173\u8054\u578b\u8ba1\u7b97\u5c5e\u6027",o.createElement("code",null,"BookStore.newestBooks"),"\u6240\u5bf9\u5e94\u7684\u7f13\u5b58\u5931\u6548")),o.createElement(d.Z,null,o.createElement(i.Z,null,"BookStore.avgPrice-1"),o.createElement(i.Z,null,"\u8ba1\u7b97\u7f13\u5b58"),o.createElement(i.Z,null,"\u5bf9\u4e8e\u65b0\u7684\u7236\u5bf9\u8c61",o.createElement("code",null,"BookStore-1"),"\u800c\u8a00\uff0c\u5176\u5173\u7edf\u8ba1\u578b\u8ba1\u7b97\u5c5e\u6027",o.createElement("code",null,"BookStore.avgPrice"),"\u6240\u5bf9\u5e94\u7684\u7f13\u5b58\u5931\u6548")))))))),y=o.createElement(o.Fragment,null,o.createElement("p",null,o.createElement("img",{src:b})),o.createElement("p",null,o.createElement("b",null,"Left side"),": modify the data in the database, udpate the foreign key ",o.createElement("code",null,"STORE_ID")," of ",o.createElement("code",null,"Book-10")," from ",o.createElement("code",null,"2")," to ",o.createElement("code",null,"1")),o.createElement("p",null,o.createElement("b",null,"Right side"),": This action will cause a chain reaction, jimmer will automatically clean up all affected caches, and the actions of cleaning the cache will leave log records in the IDE",o.createElement("div",{style:{padding:"1rem",marginLeft:"2rem"}},o.createElement(u.Z,{component:a.Z},o.createElement(c.Z,null,o.createElement(s.Z,null,o.createElement(d.Z,null,o.createElement(i.Z,null,"The name of the cache to be cleared"),o.createElement(i.Z,null,o.createElement("span",{style:{whiteSpace:"nowrap"}},"cache type")),o.createElement(i.Z,null,"describe"))),o.createElement(m.Z,null,o.createElement(d.Z,null,o.createElement(i.Z,null,"Book-10"),o.createElement(i.Z,null,"Object Cache"),o.createElement(i.Z,null,"For the modified book ",o.createElement("code",null,"Book-10"),", its object cache is invalid")),o.createElement(d.Z,null,o.createElement(i.Z,null,"Book.store-10"),o.createElement(i.Z,null,"Association cache"),o.createElement(i.Z,null,"For the modified book ",o.createElement("code",null,"Book-10"),", the cache corresponding to the many-to-one association property ",o.createElement("code",null,"Book.store")," is invalid")),o.createElement(d.Z,null,o.createElement(i.Z,null,"BookStore.books-2"),o.createElement(i.Z,null,"Association cache"),o.createElement(i.Z,null,"For the old parent object ",o.createElement("code",null,"BookStore-2"),", the cache corresponding to its one-to-many association property ",o.createElement("code",null,"BookStore.books")," is invalid")),o.createElement(d.Z,null,o.createElement(i.Z,{style:{whiteSpace:"nowrap"}},"BookStore.newestBooks-2"),o.createElement(i.Z,null,"Calculated cache"),o.createElement(i.Z,null,"For the old parent object ",o.createElement("code",null,"BookStore-2"),", the cache corresponding to the associated calculated property ",o.createElement("code",null,"BookStore.newestBooks")," is invalid")),o.createElement(d.Z,null,o.createElement(i.Z,null,"BookStore.avgPrice-2"),o.createElement(i.Z,null,"Calculated cache"),o.createElement(i.Z,null,"For the old parent object ",o.createElement("code",null,"BookStore-2"),", the cache corresponding to the statistical calculated property ",o.createElement("code",null,"BookStore.avgPrice")," is invalid")),o.createElement(d.Z,null,o.createElement(i.Z,null,"BookStore.books-1"),o.createElement(i.Z,null,"Association cache"),o.createElement(i.Z,null,"For the new parent object ",o.createElement("code",null,"BookStore-1"),", the cache corresponding to its one-to-many association property ",o.createElement("code",null,"BookStore.books")," is invalid")),o.createElement(d.Z,null,o.createElement(i.Z,null,"BookStore.newestBooks-1"),o.createElement(i.Z,null,"Calculated cache"),o.createElement(i.Z,null,"For the new parent object ",o.createElement("code",null,"BookStore-1"),", the cache corresponding to the associated calculated property ",o.createElement("code",null,"BookStore.newestBooks")," is invalid")),o.createElement(d.Z,null,o.createElement(i.Z,null,"BookStore.avgPrice-1"),o.createElement(i.Z,null,"Calculated cache"),o.createElement(i.Z,null,"For the new parent object ",o.createElement("code",null,"BookStore-1"),", the cache corresponding to the statistical calculated property ",o.createElement("code",null,"BookStore.avgPrice")," is invalid"))))))))},32102:(e,t,n)=>{n.d(t,{s:()=>Z});var l=n(83117),o=n(67294),r=n(50657),a=n(42293),c=n(10155),m=n(15861),i=n(6514),u=n(54776),s=n(93946),d=n(9137),E=n(61274),p=n(50594);const Z=(0,o.memo)((e=>{let{open:t,fullScreen:n=!1,title:l,onClose:u,children:Z}=e;const[h,b]=(0,o.useState)(n),f=(0,o.useCallback)((()=>{b((e=>!e))}),[]);return o.createElement(r.Z,{open:t,onClose:u,fullScreen:h,TransitionComponent:k,maxWidth:"md"},o.createElement(a.Z,{sx:{position:"relative"}},o.createElement(c.Z,null,o.createElement(m.Z,{sx:{ml:2,flex:1},variant:"h6",component:"div"},l),o.createElement(s.Z,{onClick:f,style:{color:"white"}},h?o.createElement(E.Z,null):o.createElement(d.Z,null)),o.createElement(s.Z,{"aria-label":"close",onClick:u,style:{color:"white"}},o.createElement(p.Z,null)))),o.createElement(i.Z,null,Z))})),k=o.forwardRef((function(e,t){return o.createElement(u.Z,(0,l.Z)({direction:"up",ref:t},e))}))},39511:(e,t,n)=>{n.d(t,{b:()=>a});var l=n(83321),o=n(67294),r=n(32102);const a=(0,o.memo)((e=>{let{buttonText:t,fullScreen:n=!1,title:a=t,variant:c="contained",children:m}=e;const[i,u]=(0,o.useState)(!1),s=(0,o.useCallback)((()=>{u(!0)}),[]),d=(0,o.useCallback)((()=>{u(!1)}),[]);return o.createElement(o.Fragment,null,o.createElement(l.Z,{onClick:s,variant:c,size:"outlined"==c?"small":"medium"},t),o.createElement(r.s,{open:i,onClose:d,title:a,fullScreen:n},m))}))},53143:(e,t,n)=>{n.d(t,{S:()=>o});var l=n(52263);function o(){const{i18n:e}=(0,l.Z)(),t=e.currentLocale;return"zh"===t||"zh_cn"===t||"zh_CN"==t}},78447:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>Z,frontMatter:()=>i,metadata:()=>s,toc:()=>E});var l=n(83117),o=(n(67294),n(3905)),r=n(39511),a=n(82276),c=n(66501),m=n(36701);const i={sidebar_position:5,title:"\u7f13\u5b58\u7bc7"},u=void 0,s={unversionedId:"cache/index",id:"cache/index",title:"\u7f13\u5b58\u7bc7",description:"Jimmer\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u7f13\u5b58\u652f\u6301\u80fd\u529b\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/cache/index.mdx",sourceDirName:"cache",slug:"/cache/",permalink:"/jimmer/zh/docs/cache/",draft:!1,editUrl:"https://github.com/babyfish-ct/jimmer/tree/main/doc/docs/cache/index.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"\u7f13\u5b58\u7bc7"},sidebar:"tutorialSidebar",previous:{title:"\u89e6\u53d1\u5668",permalink:"/jimmer/zh/docs/mutation/trigger"},next:{title:"\u542f\u7528\u7f13\u5b58",permalink:"/jimmer/zh/docs/cache/enable-cache"}},d={},E=[],p={toc:E};function Z(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,l.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Jimmer\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u7f13\u5b58\u652f\u6301\u80fd\u529b\u3002"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"\u662f\u5426\u4f7f\u7528\u7f13\u5b58\uff0c\u5bf9\u5f00\u53d1\u4eba\u5458\u5b8c\u5168\u900f\u660e")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"\u4f7f\u7528\u54ea\u4e9b\u7f13\u5b58\u6280\u672f\uff0c\u7531\u5f00\u53d1\u4eba\u5458\u51b3\u5b9a")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"\u4e0d\u4ec5\u652f\u6301\u7b80\u5355\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"id->\u5bf9\u8c61"),"\u7f13\u5b58\uff0c\u8fd8\u652f\u6301\u5c5e\u6027\u7ea7\u7f13\u5b58\uff0c\u5305\u62ec",(0,o.kt)(r.b,{buttonText:"\u5173\u8054\u7f13\u5b58",variant:"text",mdxType:"ViewMore"},(0,o.kt)("img",{src:c.Z})),"\u548c",(0,o.kt)(r.b,{buttonText:"\u8ba1\u7b97\u7f13\u5b58",variant:"text",mdxType:"ViewMore"},(0,o.kt)("img",{src:m.Z})),"\u3002\n\u6700\u7ec8\u63d0\u4f9b\u4efb\u610f\u5f62\u72b6\u7684\u6570\u636e\u7ed3\u6784\u7684\u7f13\u5b58\u80fd\u529b\uff0c\u800c\u975e\u7b80\u5355\u5bf9\u8c61\u7684\u7f13\u5b58\u80fd\u529b")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"\u5f3a\u5927\u7684\u7f13\u5b58\u4e00\u81f4\u6027\u652f\u6301\uff0c\u5f00\u53d1\u4eba\u5458\u4e13\u6ce8\u4e8e\u4fee\u6539\u6570\u636e\u5e93\u5373\u53ef\uff0cJimmer\u81ea\u52a8",(0,o.kt)(r.b,{buttonText:"\u4fdd\u8bc1\u6570\u636e\u5e93\u548c\u7f13\u5b58\u7684\u4e00\u81f4\u6027",variant:"text",mdxType:"ViewMore"},(0,o.kt)(a.x7,{mdxType:"CacheConsistencyPanel"}))))))}Z.isMDXComponent=!0},66501:(e,t,n)=>{n.d(t,{Z:()=>l});const l=n.p+"assets/images/association-cache-a56183bba7a369821e88cbfb277c9464.png"},36701:(e,t,n)=>{n.d(t,{Z:()=>l});const l=n.p+"assets/images/calculated-cache-fed29948e1b2f8fb93bf45851e5668b3.png"},94233:(e,t,n)=>{n.d(t,{Z:()=>l});const l=n.p+"assets/images/consistency-533dc48b0d9b3500ad8b64960045b6da.jpg"}}]);