"use strict";(self.webpackChunkdocusaurus_code=self.webpackChunkdocusaurus_code||[]).push([[2339],{31536:(e,t,n)=>{n.d(t,{Z:()=>I});var a=n(80102),l=n(83117),o=n(67294),r=n(10209),i=n(59766),p=n(94780),m=n(34867);const k=(0,n(70182).ZP)();var d=n(65149),u=n(39707),s=n(66500),c=n(95408),N=n(98700),h=n(85893);const g=["component","direction","spacing","divider","children","className","useFlexGap"],v=(0,s.Z)(),C=k("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function b(e){return(0,d.Z)({props:e,name:"MuiStack",defaultTheme:v})}function E(e,t){const n=o.Children.toArray(e).filter(Boolean);return n.reduce(((e,a,l)=>(e.push(a),l<n.length-1&&e.push(o.cloneElement(t,{key:`separator-${l}`})),e)),[])}const y=({ownerState:e,theme:t})=>{let n=(0,l.Z)({display:"flex",flexDirection:"column"},(0,c.k9)({theme:t},(0,c.P$)({values:e.direction,breakpoints:t.breakpoints.values}),(e=>({flexDirection:e}))));if(e.spacing){const a=(0,N.hB)(t),l=Object.keys(t.breakpoints.values).reduce(((t,n)=>(("object"==typeof e.spacing&&null!=e.spacing[n]||"object"==typeof e.direction&&null!=e.direction[n])&&(t[n]=!0),t)),{}),o=(0,c.P$)({values:e.direction,base:l}),r=(0,c.P$)({values:e.spacing,base:l});"object"==typeof o&&Object.keys(o).forEach(((e,t,n)=>{if(!o[e]){const a=t>0?o[n[t-1]]:"column";o[e]=a}}));const p=(t,n)=>{return e.useFlexGap?{gap:(0,N.NA)(a,t)}:{"& > :not(style) ~ :not(style)":{margin:0,[`margin${l=n?o[n]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[l]}`]:(0,N.NA)(a,t)}};var l};n=(0,i.Z)(n,(0,c.k9)({theme:t},r,p))}return n=(0,c.dt)(t.breakpoints,n),n};var Z=n(90948),B=n(71657);const f=function(e={}){const{createStyledComponent:t=C,useThemeProps:n=b,componentName:i="MuiStack"}=e,k=t(y),d=o.forwardRef((function(e,t){const o=n(e),d=(0,u.Z)(o),{component:s="div",direction:c="column",spacing:N=0,divider:v,children:C,className:b,useFlexGap:y=!1}=d,Z=(0,a.Z)(d,g),B={direction:c,spacing:N,useFlexGap:y},f=(0,p.Z)({root:["root"]},(e=>(0,m.Z)(i,e)),{});return(0,h.jsx)(k,(0,l.Z)({as:s,ownerState:B,ref:t,className:(0,r.Z)(f.root,b)},Z,{children:v?E(C,v):C}))}));return d}({createStyledComponent:(0,Z.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,B.Z)({props:e,name:"MuiStack"})}),I=f},86153:(e,t,n)=>{n.d(t,{_:()=>_});var a=n(67294),l=n(87357),o=n(83321),r=n(61903),i=n(23599),p=n(86886),m=n(67720),k=n(90629),d=n(7906),u=n(295),s=n(53252),c=n(72882),N=n(53184),h=n(53816),g=n(24661),v=n(96540),C=n(93946),b=n(41733),E=n(50657),y=n(31425),Z=n(6514),B=n(58951),f=n(37645),I=n(52263),T=n(59457);const _=(0,a.memo)((()=>{const{i18n:e}=(0,I.Z)(),t=(0,a.useMemo)((()=>"zh"==e.currentLocale||"zh_cn"==e.currentLocale||"zh_CN"==e.currentLocale),[e.currentLocale]),n=(0,a.useMemo)((()=>S),[t]),_=(0,a.useMemo)((()=>{const e=new Map;for(const t of n)e.set(t.id,t);return e}),[n]),x=(0,a.useMemo)((()=>("zh"==e.currentLocale||"zh_cn"==e.currentLocale||e.currentLocale,O)),[e.currentLocale]),A=(0,a.useMemo)((()=>{const e=new Map;for(const t of x)e.set(t.id,t);return e}),[x]),[D,w]=(0,T.x)((()=>({userId:1,province:_.get(1).province,city:_.get(1).city,address:_.get(1).address,items:[{__rowId:1,productId:1,name:A.get(1).name,quantity:2},{__rowId:2,productId:10,name:A.get(10).name,quantity:1}]}))),q=(0,a.useMemo)((()=>Math.max(...D.items.map((e=>e.__rowId)))+1),[D]),M=(0,a.useCallback)((e=>{const t=_.get(parseInt(e.target.value));void 0!==t&&w((e=>{e.userId=t.id,e.province=t.province,e.city=t.city,e.address=t.address}))}),[w,_]),P=(0,a.useCallback)((e=>{w((t=>{t.province=e.target.value}))}),[w]),R=(0,a.useCallback)((e=>{w((t=>{t.city=e.target.value}))}),[w]),j=(0,a.useCallback)((e=>{w((t=>{t.address=e.target.value}))}),[w]),K=(0,a.useCallback)(((e,t)=>{w((n=>{for(const a of n.items)if(a.__rowId===t){a.productId=parseInt(e.target.value),L(n);break}}))}),[w]),U=(0,a.useCallback)(((e,t)=>{w((n=>{for(const a of n.items)if(a.__rowId===t){a.quantity=parseInt(e.target.value),L(n);break}}))}),[w]),G=(0,a.useCallback)((e=>{w((t=>{for(let n=t.items.length-1;n>=0;--n)if(t.items[n].__rowId===e){t.items.splice(n,1);break}}))}),[w]),Q=(0,a.useCallback)((()=>{w((e=>{e.items.push({__rowId:q,quantity:1})}))}),[w,q]),[z,F]=(0,a.useState)(!1),H=(0,a.useCallback)((()=>{F(!0)}),[]),J=(0,a.useCallback)((()=>{F(!1)}),[]);return a.createElement(k.Z,{elevation:3,style:{padding:"1.5rem"}},a.createElement(l.Z,{component:"form",noValidate:!0,autoComplete:"off"},a.createElement(p.ZP,{container:!0,spacing:2},a.createElement(p.ZP,{item:!0,xs:4},a.createElement(r.Z,{fullWidth:!0,select:!0,label:"\u8d2d\u4e70\u4eba",value:D.userId,onChange:M},n.map((e=>a.createElement(i.Z,{key:e.id,value:e.id},e.nickName))))),a.createElement(p.ZP,{item:!0,xs:4},a.createElement(r.Z,{fullWidth:!0,label:"\u7701\u4efd",value:D.province,onChange:P})),a.createElement(p.ZP,{item:!0,xs:4},a.createElement(r.Z,{fullWidth:!0,label:"\u57ce\u5e02",value:D.city,onChange:R})),a.createElement(p.ZP,{item:!0,xs:12},a.createElement(r.Z,{fullWidth:!0,label:"\u5730\u5740",value:D.address,onChange:j})),a.createElement(p.ZP,{item:!0,xs:12},a.createElement(m.Z,{textAlign:"left"},"\u8ba2\u5355\u660e\u7ec6"),a.createElement(c.Z,{component:k.Z},a.createElement(d.Z,{size:"small"},a.createElement(N.Z,null,a.createElement(h.Z,null,a.createElement(s.Z,null,"\u5546\u54c1"),a.createElement(s.Z,null,"\u6570\u91cf"),a.createElement(s.Z,null,"\u5355\u4ef7"),a.createElement(s.Z,null,"\u660e\u7ec6\u4ef7"),a.createElement(s.Z,null,"\u5220\u9664"))),a.createElement(u.Z,null,D.items.map((e=>{const t=void 0!==e.productId?A.get(e.productId):void 0;return a.createElement(h.Z,{key:e.__rowId},a.createElement(s.Z,null,a.createElement(r.Z,{select:!0,value:null==t?void 0:t.id,variant:"standard",size:"small",onChange:t=>{K(t,e.__rowId)}},x.map((e=>a.createElement(i.Z,{key:e.id,value:e.id},e.name))))),a.createElement(s.Z,null,a.createElement(r.Z,{type:"number",value:e.quantity,variant:"standard",size:"small",onChange:t=>{U(t,e.__rowId)}})),a.createElement(s.Z,null,null==t?void 0:t.price),a.createElement(s.Z,null,void 0!==t&&t.price*e.quantity),a.createElement(s.Z,null,a.createElement(C.Z,{onClick:()=>G(e.__rowId)},a.createElement(b.Z,null))))}))),a.createElement(g.Z,null,a.createElement(h.Z,null,a.createElement(s.Z,{colSpan:5},a.createElement(o.Z,{variant:"outlined",onClick:Q},a.createElement(v.Z,null),"\u6dfb\u52a0"))))))),a.createElement(p.ZP,{item:!0,xs:12},t?"\u603b\u989d":"Total price",":",D.items.filter((e=>void 0!==e.productId&&"number"==typeof e.quantity)).map((e=>A.get(e.productId).price*e.quantity)).reduce(((e,t)=>e+t),0)),a.createElement(p.ZP,{item:!0,xs:12},a.createElement(o.Z,{variant:"contained",onClick:H},"\u63d0\u4ea4")))),a.createElement(E.Z,{open:z,onClose:J},a.createElement(f.Z,null,t?"\u4fe1\u606f":"Info"),a.createElement(Z.Z,null,a.createElement(B.Z,null,t?"\u4ec5\u4f5c\u793a\u8303\uff0c\u65e0\u4efb\u4f55\u6548\u679c":"For demonstration only, without any effect")),a.createElement(y.Z,null,a.createElement(o.Z,{onClick:J},"\u5173\u95ed"))))})),S=[{id:1,nickName:"\u76ae\u76ae\u9c81",province:"\u56db\u5ddd",city:"\u6210\u90fd",address:"\u9f99\u6cc9\u9a7f\u533a\u6d2a\u7389\u8def\u4e0e\u5341\u6d2a\u8def\u4ea4\u53c9\u53e3"},{id:2,nickName:"\u9c81\u897f\u897f",province:"\u5e7f\u4e1c",city:"\u5e7f\u5dde",address:"\u767d\u4e91\u533a\u77f3\u6c99\u8def300\u53f7"},{id:3,nickName:"\u8212\u514b",province:"\u897f\u85cf",city:"\u62c9\u8428",address:"\u5806\u9f99\u5fb7\u5e86\u533a"},{id:4,nickName:"\u8d1d\u5854",province:"\u4e0a\u6d77",city:"\u4e0a\u6d77",address:"\u6d66\u4e1c\u65b0\u533a\u79c0\u6cbf\u897f\u8def218\u5f04"}],O=[{id:1,name:"zippo\u591c\u5149\u6d41\u6c99\u6253\u706b\u673a",price:268},{id:2,name:"\u6770\u767b(Jayden)\u5370\u5ea6\u5854\u5e03\u62c9\u9f13",price:9238},{id:3,name:"\u6d6a\u7434(Longines)\u673a\u68b0\u624b\u8868",price:13900},{id:4,name:"viney\u7537\u58eb\u76ae\u5e26",price:139},{id:5,name:"\u96c5\u8bd7\u5170\u9edb\u7ed2\u96fe\u54d1\u5149\u5507\u818f",price:310},{id:6,name:"CIRCUIT\u7537\u5b50\u6ed1\u96ea\u5355\u677f",price:2044},{id:7,name:"\u7279\u4ed1\u82cf\u8131\u8102\u725b\u5976",price:47},{id:8,name:"\u4e50\u9ad8\u79ef\u6728\u5e03\u52a0\u8fea",price:374},{id:9,name:"\u53cc\u559c\u71c3\u6c14\u7535\u78c1\u901a\u7528\u538b\u529b\u9505",price:137},{id:10,name:"\u61a8\u61a8\u5ba0\u732b\u722c\u67b6",price:238}];function L(e){const t=e.items,n=new Map;for(let a=0;a<t.length;a++){const e=t[a];if("number"!=typeof e.quantity)e.quantity=1;else if(e.quantity<1){t.splice(a--,1);continue}if(void 0===e.productId)continue;const l=n.get(e.productId);void 0===l?n.set(e.productId,e):(l.quantity+=e.quantity,t.splice(a--,1))}}},20036:(e,t,n)=>{n.d(t,{k:()=>v});var a=n(52263),l=n(94054),o=n(33841),r=n(23599),i=n(90629),p=n(43246),m=n(31536),k=n(61903),d=n(50657),u=n(37645),s=n(6514),c=n(31425),N=n(58951),h=n(83321),g=n(67294);const v=(0,g.memo)((()=>{const[e,t]=(0,g.useState)((()=>({name:"Learning GraphQL",edition:1,price:45,storeId:1,authorIds:[1,2]}))),n=(0,g.useCallback)((e=>{t((t=>({...t,name:e.target.value})))}),[]),v=(0,g.useCallback)((e=>{t((t=>({...t,edition:e.target.valueAsNumber})))}),[]),C=(0,g.useCallback)((e=>{t((t=>({...t,price:e.target.valueAsNumber})))}),[]),b=(0,g.useCallback)((e=>{let n;const a=e.target.value;n="string"==typeof a?parseInt(a):a,-1===n&&(n=void 0),t((e=>({...e,storeId:n})))}),[]),E=(0,g.useCallback)((e=>{let n=[];console.log(e.target.value);const a=e.target.value;n="string"==typeof a?a.split(",").map((e=>parseInt(e))):a,t((e=>({...e,authorIds:n})))}),[]),{i18n:y}=(0,a.Z)(),Z=(0,g.useMemo)((()=>"zh"==y.currentLocale||"zh_cn"==y.currentLocale||"zh_CN"==y.currentLocale),[y.currentLocale]),[B,f]=(0,g.useState)(!1),I=(0,g.useCallback)((()=>{f(!0)}),[]),T=(0,g.useCallback)((()=>{f(!1)}),[]);return g.createElement(i.Z,{elevation:3,style:{padding:"1.5rem",width:500}},g.createElement(m.Z,{spacing:2},g.createElement("h1",null,"Book Form"),g.createElement(k.Z,{label:"Name",value:e.name,onChange:n,error:""===e.name,helperText:""===e.name?"Name is required":""}),g.createElement(k.Z,{label:"Edition",type:"number",value:e.edition,onChange:v}),g.createElement(k.Z,{label:"Price",type:"number",value:e.price,onChange:C}),g.createElement(l.Z,{fullWidth:!0},g.createElement(o.Z,{id:"store-select-label"},"Store"),g.createElement(p.Z,{labelId:"store-select-label",label:"Authors",value:e.storeId,onChange:b},g.createElement(r.Z,{value:-1},"--NONE--"),g.createElement(r.Z,{value:1},"O'REILLY"),g.createElement(r.Z,{value:2},"MANNING"))),g.createElement(l.Z,{fullWidth:!0},g.createElement(o.Z,{id:"author-multi-select-label"},"Authors"),g.createElement(p.Z,{multiple:!0,labelId:"author-multi-select-label",label:"Authors",value:e.authorIds,onChange:E},g.createElement(r.Z,{value:1},"Eve Procello"),g.createElement(r.Z,{value:2},"Alex Banks"),g.createElement(r.Z,{value:3},"Dan Vanderkam"),g.createElement(r.Z,{value:4},"Boris Cherny"),g.createElement(r.Z,{value:5},"Samer Buna"))),g.createElement(l.Z,null,g.createElement(h.Z,{onClick:I,variant:"contained"},"\u63d0\u4ea4"))),g.createElement(d.Z,{open:B,onClose:T},g.createElement(u.Z,null,Z?"\u4fe1\u606f":"Info"),g.createElement(s.Z,null,g.createElement(N.Z,null,Z?"\u4ec5\u4f5c\u793a\u8303\uff0c\u65e0\u4efb\u4f55\u6548\u679c":"For demonstration only, without any effect")),g.createElement(c.Z,null,g.createElement(h.Z,{onClick:T},"\u5173\u95ed"))))}))},32102:(e,t,n)=>{n.d(t,{s:()=>N});var a=n(83117),l=n(67294),o=n(42293),r=n(50657),i=n(6514),p=n(54776),m=n(10155),k=n(15861),d=n(93946),u=n(9137),s=n(61274),c=n(50594);const N=(0,l.memo)((e=>{let{open:t,fullScreen:n=!1,title:a,onClose:p,children:N}=e;const[g,v]=(0,l.useState)(n),C=(0,l.useCallback)((()=>{v((e=>!e))}),[]);return l.createElement(r.Z,{open:t,onClose:p,fullScreen:g,TransitionComponent:h,maxWidth:"md"},l.createElement(o.Z,{sx:{position:"relative"}},l.createElement(m.Z,null,l.createElement(k.Z,{sx:{ml:2,flex:1},variant:"h6",component:"div"},a),l.createElement(d.Z,{onClick:C,style:{color:"white"}},g?l.createElement(s.Z,null):l.createElement(u.Z,null)),l.createElement(d.Z,{"aria-label":"close",onClick:p,style:{color:"white"}},l.createElement(c.Z,null)))),l.createElement(i.Z,null,N))})),h=l.forwardRef((function(e,t){return l.createElement(p.Z,(0,a.Z)({direction:"up",ref:t},e))}))},39511:(e,t,n)=>{n.d(t,{b:()=>r});var a=n(67294),l=n(83321),o=n(32102);const r=(0,a.memo)((e=>{let{buttonText:t,fullScreen:n=!1,title:r=t,variant:i="contained",children:p}=e;const[m,k]=(0,a.useState)(!1),d=(0,a.useCallback)((()=>{k(!0)}),[]),u=(0,a.useCallback)((()=>{k(!1)}),[]);return a.createElement(a.Fragment,null,a.createElement(l.Z,{onClick:d,variant:i,size:"outlined"==i?"small":"medium"},t),a.createElement(o.s,{open:m,onClose:u,title:r,fullScreen:n},p))}))},47232:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>d,default:()=>h,frontMatter:()=>k,metadata:()=>u,toc:()=>c});var a=n(83117),l=(n(67294),n(3905)),o=n(65488),r=n(85162),i=n(20036),p=n(86153),m=n(39511);const k={sidebar_position:5,title:"Dissociation"},d=void 0,u={unversionedId:"mutation/save-command/dissociation",id:"mutation/save-command/dissociation",title:"Dissociation",description:"\u5728\u4fdd\u5b58\u5173\u8054\u5bf9\u8c61\u65f6\uff0c\u4f1a\u6d89\u53ca\u4e00\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff1a\u8131\u52fe\u64cd\u4f5c\u3002",source:"@site/docs/mutation/save-command/dissociation.mdx",sourceDirName:"mutation/save-command",slug:"/mutation/save-command/dissociation",permalink:"/jimmer/docs/mutation/save-command/dissociation",draft:!1,editUrl:"https://github.com/babyfish-ct/jimmer/tree/main/doc/docs/mutation/save-command/dissociation.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"Dissociation"},sidebar:"tutorialSidebar",previous:{title:"Association",permalink:"/jimmer/docs/mutation/save-command/association"},next:{title:"Id checking for short associations",permalink:"/jimmer/docs/mutation/save-command/id-checking"}},s={},c=[{value:"\u6982\u5ff5",id:"\u6982\u5ff5",level:2},{value:"\u8131\u52fe\u4e2d\u95f4\u8868\u6570\u636e",id:"\u8131\u52fe\u4e2d\u95f4\u8868\u6570\u636e",level:2},{value:"\u8131\u52fe\u5b50\u8868\u6570\u636e",id:"\u8131\u52fe\u5b50\u8868\u6570\u636e",level:2},{value:"\u8131\u52fe\u6a21\u5f0f",id:"\u8131\u52fe\u6a21\u5f0f",level:3},{value:"\u793a\u8303",id:"\u793a\u8303",level:3}],N={toc:c};function h(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"\u5728\u4fdd\u5b58\u5173\u8054\u5bf9\u8c61\u65f6\uff0c\u4f1a\u6d89\u53ca\u4e00\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff1a\u8131\u52fe\u64cd\u4f5c\u3002"),(0,l.kt)("h2",{id:"\u6982\u5ff5"},"\u6982\u5ff5"),(0,l.kt)("p",null,"\u73b0\u770b\u4e00\u4e2a\u4f8b\u5b50"),(0,l.kt)("table",null,(0,l.kt)("thead",null,(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u6570\u636e\u5e93\u5df2\u6709\u6570\u636e\u7ed3\u6784"),(0,l.kt)("th",null,"\u7528\u6237\u671f\u671b\u4fdd\u5b58\u7684\u6570\u636e\u7ed3\u6784"))),(0,l.kt)("tbody",null,(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"+-Food\n|\n|\n|\n# highlight-next-line\n+-----Meat(\u5ffd\u7565\u5b50\u8282\u70b9)\n|\n\\-----Bread(\u5ffd\u7565\u5b50\u8282\u70b9)\n"))),(0,l.kt)("td",null,(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"+-Food\n|\n+-----Drinks(\u5ffd\u7565\u5b50\u8282\u70b9)\n|\n|\n|\n\\-----Bread(\u5ffd\u7565\u5b50\u8282\u70b9)\n")))))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5bf9\u4e8e",(0,l.kt)("inlineCode",{parentName:"p"},"Bread"),"\u800c\u8a00\uff0c\u5728\u65b0\u65e7\u6570\u636e\u7ed3\u6784\u4e2d\u90fd\u5b58\u5728\uff0c\u5bf9\u5e94update\u64cd\u4f5c")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5bf9\u4e8e",(0,l.kt)("inlineCode",{parentName:"p"},"Drinks"),"\u800c\u8a00\uff0c\u5728\u65e7\u6570\u636e\u7ed3\u6784\u4e2d\u4e0d\u5b58\u5728\uff0c\u4f46\u5728\u65b0\u6570\u636e\u4e2d\u5b58\u5728\uff0c\u5bf9\u5e94INSERT\u64cd\u4f5c")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5bf9\u4e8e",(0,l.kt)("inlineCode",{parentName:"p"},"Meat"),"\u800c\u8a00\uff0c\u5728\u65e7\u6570\u636e\u7ed3\u6784\u4e2d\u5b58\u5728\uff0c\u4f46\u5728\u65b0\u6570\u636e\u4e2d\u4e0d\u5b58\u5728\uff0c\u5bf9\u5e94\u7684\u64cd\u4f5c\u53eb\u505a\u8131\u52fe\u64cd\u4f5c\u3002"))),(0,l.kt)("p",null,"\u8131\u52fe\u9488\u5bf9\u4e24\u79cd\u6570\u636e"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u4e2d\u95f4\u8868\u6570\u636e")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5b50\u8868\u6570\u636e"))),(0,l.kt)("p",null,"\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u8ba8\u8bba\u8fd9\u4e24\u79cd\u8131\u52fe\u64cd\u4f5c\u3002"),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"\u5728\u672c\u6587\u4e2d\uff0c\u4e3a\u4e86\u5c3d\u53ef\u80fd\u7b80\u5316\u751f\u6210\u7684SQL\uff0c\u8ba9\u6211\u4eec\u805a\u7126\u4e8e\u5173\u8054\u672c\u8eab\u548c\u8131\u52fe\u64cd\u4f5c"),(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6240\u6709\u88ab\u4fdd\u5b58\u5bf9\u8c61\u4e00\u5f8b\u53ea\u6307\u5b9aid\u5c5e\u6027")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u805a\u5408\u6839\u5bf9\u8c61\u7684\u4fdd\u5b58\u6a21\u5f0f\u4e00\u5f8b\u660e\u786e\u6307\u5b9a\u4e3aUPDATE_ONLY ",(0,l.kt)("em",{parentName:"p"},"(\u672c\u91c7\u7528\u8c03\u7528update\u65b9\u6cd5\u7684\u5199\u6cd5)"))))),(0,l.kt)("h2",{id:"\u8131\u52fe\u4e2d\u95f4\u8868\u6570\u636e"},"\u8131\u52fe\u4e2d\u95f4\u8868\u6570\u636e"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"BOOK"),"\u8868\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"AUTHOR"),"\u8868\u4e4b\u95f4\u5b58\u5728\u591a\u5bf9\u8fc7\u5173\u8054\uff0c\u4e2d\u95f4\u8868\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"BOOK_AUTHOR_MAPPING"),"\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Book.authors"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Author.books"),"\u5c5e\u6027\u90fd\u6620\u5c04\u4e86\u8fd9\u4e2a\u591a\u5bf9\u591a\u5173\u8054\uff0c\u4e14\u4e92\u4e3a\u955c\u50cf\u3002\u4f7f\u7528\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a\u90fd\u53ef\u4ee5\u8fbe\u5230\u6f14\u793a\u6548\u679c\uff0c\u8fd9\u91cc\u6211\u4eec\u9009\u53d6",(0,l.kt)("inlineCode",{parentName:"p"},"Book.authors")),(0,l.kt)("p",null,"\u9996\u5148\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u770bid\u4e3a3\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"Book"),"\u5bf9\u5e94\u4e86\u54ea\u4e9b",(0,l.kt)("inlineCode",{parentName:"p"},"Author"),"\u5bf9\u8c61\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"select * \nfrom book_author_mapping\nwhere book_id = 3;\n")),(0,l.kt)("p",null,"\u5f97\u5230\u5982\u4e0b\u67e5\u8be2\u7ed3\u679c\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"book_id"),(0,l.kt)("th",{parentName:"tr",align:null},"author_id"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"3"),(0,l.kt)("td",{parentName:"tr",align:null},"1")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"3"),(0,l.kt)("td",{parentName:"tr",align:null},"2")))),(0,l.kt)("p",null,"\u73b0\u5728\uff0c\u66f4\u65b0\u6b64",(0,l.kt)("inlineCode",{parentName:"p"},"Book"),"\u5bf9\u8c61"),(0,l.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"sqlClient.update(\n    BookDraft.$.produce(draft -> {\n        draft.setId(3L);\n        draft.addIntoAuthors(author -> author.setId(2L));\n        draft.addIntoAuthors(author -> author.setId(5L));\n    })\n);\n"))),(0,l.kt)(r.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},"sqlClient.update(\n    new(Book::class).by {\n        id = 3L\n        authors().addBy { id = 2L }\n        authors().addBy { id = 3L }\n    }\n)\n")))),(0,l.kt)("p",null,"\u65b0\u65e7\u6570\u636e\u7ed3\u6784\u5bf9\u6bd4\u5982\u4e0b\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",null,(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u6570\u636e\u5e93\u5df2\u6709\u6570\u636e\u7ed3\u6784"),(0,l.kt)("th",null,"\u7528\u6237\u671f\u671b\u4fdd\u5b58\u7684\u6570\u636e\u7ed3\u6784"))),(0,l.kt)("tbody",null,(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"+-Book(id=3)\n|\n# highlight-next-line\n+-----Author(id=1)\n|\n\\-----Author(id=2)\n\n\n"))),(0,l.kt)("td",null,(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"+-Book(id=3)\n|\n|\n|\n+-----Author(id=2)\n|\n\\-----Author(id=5)\n")))))),(0,l.kt)("p",null,"\u8fd9\u8868\u793a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"Book-3"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Author-2"),"\u4e4b\u95f4\u7684\u5173\u8054\u4e0d\u53d8")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"Book-3"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Author-5"),"\u4e4b\u95f4\u9700\u8981\u65b0\u5efa\u5173\u8054")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"Book-3"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Author-1"),"\u4e4b\u95f4\u7684\u5173\u8054\u9700\u8981\u88ab\u5220\u9664\uff0c\u8fd9\u5c31\u662f\u8131\u52fe\u64cd\u4f5c"))),(0,l.kt)("p",null,"\u6700\u7ec8\u751f\u6210\u4e09\u6761SQL"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u67e5\u8be2",(0,l.kt)("inlineCode",{parentName:"p"},"Book-3"),"\u5bf9\u5e94\u4e86\u54ea\u4e9b",(0,l.kt)("inlineCode",{parentName:"p"},"Author"),"\u5bf9\u8c61"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"select\n    AUTHOR_ID\nfrom BOOK_AUTHOR_MAPPING\nwhere\n    BOOK_ID = ? /* 3 */\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("strong",{parentName:"p"},"\u8131\u52fe\u64cd\u4f5c\uff0c\u5207\u65ad",(0,l.kt)("inlineCode",{parentName:"strong"},"Book-3"),"\u548c",(0,l.kt)("inlineCode",{parentName:"strong"},"Author-1"),"\u4e4b\u95f4\u7684\u5173\u8054")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"/* highlight-next-line */\ndelete from BOOK_AUTHOR_MAPPING\nwhere\n    (BOOK_ID, AUTHOR_ID) in (\n        (? /* 3 */, ? /* 1 */)\n    )\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u65b0\u5efa",(0,l.kt)("inlineCode",{parentName:"p"},"Book-3"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Author-5"),"\u4e4b\u95f4\u7684\u5173\u8054"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"insert into BOOK_AUTHOR_MAPPING(\n    BOOK_ID, AUTHOR_ID\n)\nvalues\n    (? /* 3 */, ? /* 5 */)\n")))),(0,l.kt)("h2",{id:"\u8131\u52fe\u5b50\u8868\u6570\u636e"},"\u8131\u52fe\u5b50\u8868\u6570\u636e"),(0,l.kt)("p",null,"\u6b64\u64cd\u4f5c\u9488\u5bf9\u76f4\u63a5\u7ed9\u4e88\u5916\u952e\u7684\u4e00\u5bf9\u591a\u5173\u8054\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"BOOK"),"\u8868\u6709\u4e00\u4e2a\u6307\u5411",(0,l.kt)("inlineCode",{parentName:"p"},"BOOK_STORE"),"\u8868\u7684\u5916\u952e\u5b57\u6bb5",(0,l.kt)("inlineCode",{parentName:"p"},"STORE_ID"),"\uff0c\u5f62\u6210\u591a\u5bf9\u4e00\u5173\u7cfb\u3002\u8fd9\u4e2a\u591a\u5bf9\u4e00\u5173\u8054\u88ab\u6620\u5c04\u6210\u4e86\u5c5e\u6027",(0,l.kt)("inlineCode",{parentName:"p"},"Book.store"),"\uff0c\u53cd\u8fc7\u6765\u7684\u4e00\u5bf9\u591a\u5173\u8054\u88ab\u6620\u5c04\u6210\u4e86\u5c5e\u6027",(0,l.kt)("inlineCode",{parentName:"p"},"BookStore.books"),"\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u6570\u636e\u5e93\u4e2d\u67d0\u4e2a\u7236\u5bf9\u8c61 ",(0,l.kt)("em",{parentName:"p"},"(\u672c\u4f8b\u7684",(0,l.kt)("inlineCode",{parentName:"em"},"BookStore"),")")," \u6301\u6709\u67d0\u4e9b\u5b50\u5bf9\u8c61 ",(0,l.kt)("em",{parentName:"p"},"(\u672c\u4f8b\u7684",(0,l.kt)("inlineCode",{parentName:"em"},"Book"),")"),"\uff0c\u4f46\u662f\u7528\u6237\u671f\u671b\u8986\u76d6\u7684\u7236\u5bf9\u8c61\u4e0d\u518d\u7ee7\u7eed\u6301\u6709\u67d0\u4e9b\u5b50\u5bf9\u8c61\uff0c\u5c06\u4f1a\u5bfc\u81f4\u8fd9\u4e9b\u5b50\u5bf9\u8c61\u88ab\u8131\u52fe\u3002"),(0,l.kt)("h3",{id:"\u8131\u52fe\u6a21\u5f0f"},"\u8131\u52fe\u6a21\u5f0f"),(0,l.kt)("p",null,"\u5b50\u5bf9\u8c61\u8131\u52fe\u64cd\u4f5c\u6709\u4e09\u79cd\u6a21\u5f0f"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"NONE ",(0,l.kt)("em",{parentName:"p"},"(\u9ed8\u8ba4)"),": \u4e0d\u652f\u6301\u8131\u52fe\u64cd\u4f5c\uff0c\u901a\u8fc7\u629b\u51fa\u5f02\u5e38\u963b\u6b62\u64cd\u4f5c")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"SET_NULL: \u628a\u88ab\u8131\u52fe\u7684\u5b50\u5bf9\u8c61\u7684\u5916\u952e\u8bbe\u7f6e\u4e3anull\u3002\u524d\u63d0\u662f\u5b50\u5bf9\u8c61\u7684\u591a\u5bf9\u4e00\u5173\u8054\u5c5e\u6027\u662fnullable\u7684\uff1b\u5426\u5219\u5c1d\u8bd5\u6b64\u914d\u7f6e\u5c06\u4f1a\u5bfc\u81f4\u5f02\u5e38")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"DELETE: \u5c06\u88ab\u8131\u52fe\u7684\u5b50\u5bf9\u8c61\u5220\u9664"))),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"\u867d\u7136\u5b50\u5bf9\u8c61\u8131\u52fe\u662f\u7531\u4e8e\u4e00\u5bf9\u591a\u5173\u8054\u5bfc\u81f4\u7684 ",(0,l.kt)("em",{parentName:"p"},"(\u5373\uff0c\u7236\u5bf9\u8c61\u9057\u5f03\u67d0\u4e9b\u5b50\u5bf9\u8c61\uff0c\u672c\u4f8b\u7684\u4e00\u5bf9\u591a\u5173\u8054\u4e3a",(0,l.kt)("inlineCode",{parentName:"em"},"BookStore.books"),")"),"\uff0c\u4f46\u662f\u8131\u52fe\u6a21\u5f0f\u7684\u914d\u7f6e\u9488\u5bf9\u9006\u5411\u7684\u591a\u5bf9\u4e00\u5173\u8054 ",(0,l.kt)("em",{parentName:"p"},"(\u672c\u4f8b\u4e3a",(0,l.kt)("inlineCode",{parentName:"em"},"Book.store"),")"),"\uff0c\u8fd9\u6837\u8bbe\u8ba1\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u4fdd\u6301\u548c\u6570\u636e\u5e93DDL\u5916\u952e\u7684\u7ea7\u8054\u7279\u6027\u914d\u7f6e\u7684\u76f8\u4f3c\u6027\u3002"),(0,l.kt)("p",{parentName:"admonition"},"\u5bf9\u4e8eJimmr\u800c\u8a00\uff0c\u4e00\u5bf9\u591a\u5173\u8054\u4e00\u5b9a\u662f\u53cc\u5411\u5173\u8054\uff0c\u77e5\u9053\u67d0\u4e2a\u4e00\u5bf9\u591a\u5173\u8054\uff0c\u4e00\u5b9a\u77e5\u9053\u4e0e\u5176\u4e92\u4e3a\u955c\u50cf\u7684\u591a\u5bf9\u4e00\u5173\u8054\u3002\u6240\u4ee5\uff0c\u6b64\u8bbe\u8ba1\u6ca1\u6709\u4efb\u4f55\u95ee\u9898\u3002")),(0,l.kt)("p",null,"\u914d\u7f6e\u8131\u52fe\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u6cd5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5728\u5b9e\u4f53\u4e0a\u7528\u6ce8\u89e3\u9759\u6001\u914d\u7f6e\uff0c\u9759\u6001\u914d\u7f6e\u662f\u5168\u5c40\u7684\u3002")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5728\u4ee3\u7801\u4e2d\u4ee3\u7801\u52a8\u6001\u914d\u7f6e\uff0c\u4f46\u52a8\u6001\u914d\u7f6e\u53ea\u5f71\u54cd\u5f53\u524d\u4fdd\u5b58\u6307\u4ee4\u3002\u52a8\u6001\u914d\u7f6e\u53ef\u4ee5\u8986\u76d6\u9759\u6001\u914d\u7f6e\u3002"))),(0,l.kt)("p",null,"\u4ee5",(0,l.kt)("inlineCode",{parentName:"p"},"SET_NULL"),"\u4e3a\u4f8b"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u9759\u6001\u914d\u7f6e ",(0,l.kt)("em",{parentName:"p"},"(\u9ed8\u8ba4\u914d\u7f6e\uff0c\u4f9b\u7edd\u5927\u90e8\u5206\u4e1a\u52a1\u4f7f\u7528)")),(0,l.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-java",metastring:'title="Book.java"',title:'"Book.java"'},"@Entity\npublic interface Book {\n\n    //highlight-next-line\n    @OnDissociate(DissociateAction.SET_NULL)\n    @Nullable\n    @ManyToOne\n    BookStore store();\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...\n}\n"))),(0,l.kt)(r.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="Book.kt"',title:'"Book.kt"'},"@Entity\ninterface Book {\n\n    //highlight-next-line\n    @OnDissociate(DissociateAction.SET_NULL)\n    @ManyToOne\n    val store: BookStore?\n\n    ...\u7701\u7565\u5176\u4ed6\u4ee3\u7801...        \n}\n"))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u8fd0\u884c\u65f6\u8986\u76d6 ",(0,l.kt)("em",{parentName:"p"},"(\u4ec5\u9488\u5bf9\u5355\u6761\u4fdd\u5b58\u6307\u4ee4\uff0c\u6781\u5c11\u6570\u6709\u7279\u6b8a\u9700\u6c42\u7684\u4e1a\u52a1\u4f7f\u7528)")),(0,l.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-java"},"sqlClient\n    .getEntities()\n    .saveCommand(book)\n    // highlight-next-line\n    .setDissociateAction(BookProps.STORE, DissociateAction.SET_NULL)\n    .execute();\n"))),(0,l.kt)(r.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},"sqlClient.save(book) {\n    // highlight-next-line\n    .setDissociateAction(Book::store, DissociateAction.SET_NULL)\n}\n")))))),(0,l.kt)("h3",{id:"\u793a\u8303"},"\u793a\u8303"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u67e5\u770bid\u4e3a2\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"BookStore"),"\u6301\u6709\u54ea\u4e9b",(0,l.kt)("inlineCode",{parentName:"p"},"Book"),"\u5bf9\u8c61"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"select * \nfrom BOOK \nwhere STORE_ID = 2\n")),(0,l.kt)("p",null,"\u5f97\u5230\u7684\u67e5\u8be2\u7ed3\u679c\u4e3a\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"ID"),(0,l.kt)("th",{parentName:"tr",align:null},"NAME"),(0,l.kt)("th",{parentName:"tr",align:null},"EDITION"),(0,l.kt)("th",{parentName:"tr",align:null},"PRICE"),(0,l.kt)("th",{parentName:"tr",align:null},"STORE_ID"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"12"),(0,l.kt)("td",{parentName:"tr",align:null},"GraphQL in Action"),(0,l.kt)("td",{parentName:"tr",align:null},"3"),(0,l.kt)("td",{parentName:"tr",align:null},"80.00"),(0,l.kt)("td",{parentName:"tr",align:null},"2")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"11"),(0,l.kt)("td",{parentName:"tr",align:null},"GraphQL in Action"),(0,l.kt)("td",{parentName:"tr",align:null},"2"),(0,l.kt)("td",{parentName:"tr",align:null},"81.00"),(0,l.kt)("td",{parentName:"tr",align:null},"2")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"10"),(0,l.kt)("td",{parentName:"tr",align:null},"GraphQL in Action"),(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"80.00"),(0,l.kt)("td",{parentName:"tr",align:null},"2")))),(0,l.kt)("p",null,"\u73b0\u5728\uff0c\u66f4\u65b0\u6b64",(0,l.kt)("inlineCode",{parentName:"p"},"BookStore"),"\u5bf9\u8c61"),(0,l.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,l.kt)(r.Z,{value:"java",label:"Java",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"sqlClient.update(\n    BookStoreDraft.$.produce(draft -> {\n        draft.setId(2L);\n        draft.addIntoBooks(book -> book.setId(9L));\n        draft.addIntoBooks(book -> book.setId(10L));\n    })\n);\n"))),(0,l.kt)(r.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},"sqlClient.update(\n    new(BookStore::class).by {\n        id = 2L\n        books().addBy { id = 9L }\n        books().addBy { id = 10L }\n    }\n)\n")))),(0,l.kt)("p",null,"\u65b0\u65e7\u6570\u636e\u7ed3\u6784\u5bf9\u6bd4\u5982\u4e0b\uff1a"),(0,l.kt)("table",null,(0,l.kt)("thead",null,(0,l.kt)("tr",null,(0,l.kt)("th",null,"\u6570\u636e\u5e93\u5df2\u6709\u6570\u636e\u7ed3\u6784"),(0,l.kt)("th",null,"\u7528\u6237\u671f\u671b\u4fdd\u5b58\u7684\u6570\u636e\u7ed3\u6784"))),(0,l.kt)("tbody",null,(0,l.kt)("tr",null,(0,l.kt)("td",null,(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"+-BookStore(id=2)\n|\n+-----Book(id=10)\n|\n# highlight-next-line\n+-----Book(id=11)\n|\n# highlight-next-line\n\\-----Book(id=12)\n\n\n"))),(0,l.kt)("td",null,(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"+-BookStore(id=2)\n|\n+-----Book(id=10)\n|\n|\n|\n|\n|\n\\-----Book(id=9)\n")))))),(0,l.kt)("p",null,"\u8fd9\u8868\u793a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"BookStore-2"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Book-10"),"\u4e4b\u95f4\u7684\u5173\u8054\u4e0d\u53d8")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"BookStore-2"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Book-9"),"\u4e4b\u95f4\u9700\u8981\u65b0\u5efa\u5173\u8054")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"BookStore-2"),"\u9700\u8981\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Book-11"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"Book-12"),"\u8131\u52fe\u3002"),(0,l.kt)("p",{parentName:"li"},"\u7136\u800c\uff0c\u5177\u4f53SQL\u64cd\u4f5c\u672a\u77e5\uff0c\u7531",(0,l.kt)("inlineCode",{parentName:"p"},"Book.store"),"\u5c5e\u6027\u7684\u8131\u52fe\u6a21\u5f0f\u914d\u7f6e\u51b3\u5b9a"))),(0,l.kt)("p",null,"\u4e0d\u540c\u7684\u8131\u52fe\u6a21\u5f0f\u914d\u7f6e\uff0c\u4f1a\u5bfc\u81f4\u4e0d\u540c\u7684\u6267\u884c\u903b\u8f91\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5bf9",(0,l.kt)("inlineCode",{parentName:"p"},"NONE"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"SET_NULL"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"DELETE"),"\u4e09\u79cd\u60c5\u51b5\u52a0\u4ee5\u8ba8\u8bba\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"NONE")," ",(0,l.kt)("em",{parentName:"p"},"(\u9ed8\u8ba4)")),(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"NONE"),"\u8868\u793a\u4e0d\u652f\u6301\u8131\u52fe\u64cd\u4f5c\uff0c\u4ee5\u629b\u51fa\u5f02\u5e38\u7684\u65b9\u5f0f\u963b\u6b62\u64cd\u4f5c\u5e76\u5f15\u8d77\u4e8b\u52a1\u56de\u6eda\u3002\u6240\u4ee5\uff0c\u4e0a\u8ff0\u4ee3\u7801\u4f1a\u5f02\u5e38\u3002"),(0,l.kt)("p",{parentName:"li"},"\u5f02\u5e38\u7c7b\u578b\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"org.babyfish.jimmer.sql.runtime.SaveException"),"\u3002"),(0,l.kt)("p",{parentName:"li"},"\u5f02\u5e38\u6d88\u606f\u4e3a"),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("p",{parentName:"blockquote"},'Save error caused by the path: "',"<","root",">",'.books": Cannot dissociate child objects because the dissociation action of the many-to-one property "com.yourcompany.yourproject.model.Book.store" is not configured as "set null" or "cascade". There are two ways to resolve this issue: Decorate the many-to-one property "com.yourcompany.yourproject.model.Book.store" by @org.babyfish.jimmer.sql.OnDissociate whose argument is ',(0,l.kt)("inlineCode",{parentName:"p"},"DissociateAction.SET_NULL")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"DissociateAction.DELETE")," , or use save command's runtime configuration to override it"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"SET_NULL")),(0,l.kt)("p",{parentName:"li"},"\u8be5\u6a21\u5f0f\u4e0b\u4f1a\u751f\u6210\u4e24\u6761SQL"),(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u8ba9",(0,l.kt)("inlineCode",{parentName:"p"},"BookStore-2"),"\u5173\u8054",(0,l.kt)("inlineCode",{parentName:"p"},"Book-9"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Book-10"),"\uff0c\u5bf9\u4e8e",(0,l.kt)("inlineCode",{parentName:"p"},"Book-10"),"\u800c\u8a00\uff0c\u76f8\u5f53\u4e8e\u6ca1\u6709\u4efb\u4f55\u53d8\u5316\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"update BOOK\nset\n    STORE_ID = ? /* 2 */\nwhere\n    ID in (\n        ? /* 9 */, ? /* 10 */\n    )\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u5c06\u96b6\u5c5e",(0,l.kt)("inlineCode",{parentName:"p"},"BookStore-2"),"\u4e14id\u4e0d\u662f9\u621610\u7684\u6240\u6709\u4e66\u7c4d ",(0,l.kt)("em",{parentName:"p"},"(\u672c\u4f8b\u4e3a",(0,l.kt)("inlineCode",{parentName:"em"},"Book-11"),"\u548c",(0,l.kt)("inlineCode",{parentName:"em"},"Book-11"),")")," \u7684\u5916\u952e\u6e05\u7a7a\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"update BOOK\nset\n    STORE_ID = null\nwhere\n    STORE_ID = ? /* 2 */\n    and\n    ID not in (\n        ? /* 9 */, ? /* 10 */\n    )\n")),(0,l.kt)("admonition",{parentName:"li",type:"note"},(0,l.kt)("p",{parentName:"admonition"},"\u8bf7\u6ce8\u610fSQL\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"not")))))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"DELETE")),(0,l.kt)("p",{parentName:"li"},"\u8be5\u6a21\u5f0f\u4e0b\u4f1a\u751f\u62104\u6761SQL"),(0,l.kt)("ol",{parentName:"li"},(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u8ba9",(0,l.kt)("inlineCode",{parentName:"p"},"BookStore-2"),"\u5173\u8054",(0,l.kt)("inlineCode",{parentName:"p"},"Book-9"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Book-10"),"\uff0c\u5bf9\u4e8e",(0,l.kt)("inlineCode",{parentName:"p"},"Book-10"),"\u800c\u8a00\uff0c\u76f8\u5f53\u4e8e\u6ca1\u6709\u4efb\u4f55\u53d8\u5316\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"update BOOK\nset\n    STORE_ID = ? /* 2 */\nwhere\n    ID in (\n        ? /* 9 */, ? /* 10 */\n    )\n"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u67e5\u8be2\u6240\u6709\u96b6\u5c5e",(0,l.kt)("inlineCode",{parentName:"p"},"BookStore-2"),"\u4e14id\u4e0d\u662f9\u621610\u7684\u6240\u6709\u4e66\u7c4d\uff0c\u5bf9\u4e8e\u672c\u4f8b\u800c\u8a00\uff0c\u67e5\u8be2\u7ed3\u679c\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"Book-11"),"\u548c`",(0,l.kt)("inlineCode",{parentName:"p"},"Book-12"),"\u3002"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"select\n    ID\nfrom BOOK\nwhere\n    STORE_ID = ? /* 2 */\n    and\n    ID not in (\n        ? /* 9 */, ? /* 10 */\n    )\n")),(0,l.kt)("admonition",{parentName:"li",type:"note"},(0,l.kt)("p",{parentName:"admonition"},"\u8bf7\u6ce8\u610fSQL\u4e2d\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"not")))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u5728\u5220\u9664",(0,l.kt)("inlineCode",{parentName:"p"},"Book-11"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Book-12"),"\u4e4b\u524d\uff0c\u5148\u6e05\u7406\u5b83\u4eec\u548c\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Author"),"\u4e4b\u95f4\u7684\u591a\u5bf9\u591a\u5173\u8054"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"delete from BOOK_AUTHOR_MAPPING\nwhere\n    BOOK_ID in (\n        ? /* 11 */, ? /* 12 */\n    )\n")),(0,l.kt)("admonition",{parentName:"li",type:"info"},(0,l.kt)("p",{parentName:"admonition"},"\u5982\u679c",(0,l.kt)("inlineCode",{parentName:"p"},"Book"),"\u7c7b\u578b\u548c\u5176\u4ed6\u7c7b\u578b\u8fd8\u5b58\u5728\u66f4\u591a\u7684\u5173\u8054\uff0cJimmer\u90fd\u4f1a\u6e05\u7406\u5e72\u51c0\u3002\u65e0\u975e\u5c31\u662f\u8fd9\u4e2a\u6b65\u9aa4\u7684SQL\u6761\u6570\u53d8\u591a\u800c\u5df2\u3002"))),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("p",{parentName:"li"},"\u6700\u7ec8\uff0c\u5b89\u5168\u5730\u5220\u9664",(0,l.kt)("inlineCode",{parentName:"p"},"Book-11"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Book-12"),"\uff0c\u5b8c\u6210\u8131\u94a9\u64cd\u4f5c"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"delete from BOOK\nwhere\n    ID in (\n        ? /* 11 */, ? /* 12 */\n    )\n")))),(0,l.kt)("admonition",{parentName:"li",type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"\u4e8b\u5b9e\u4e0a\uff0c\u6b65\u9aa43\u548c\u6b65\u9aa44\u662f\u4e00\u4e2a\u6574\u4f53\uff0c\u56e0\u540e\u7eed\u8981\u8ba8\u8bba\u7684",(0,l.kt)("a",{parentName:"p",href:"../delete-command"},"\u5220\u9664\u6307\u4ee4"),"\u6240\u81f4\u3002")))),(0,l.kt)("admonition",{type:"info"},(0,l.kt)("p",{parentName:"admonition"},"\u672c\u6587\u5bf9\u4f8b\u5b50\u8fdb\u884c\u4e86\u5f88\u591a\u7b80\u5316\uff0c\u6bd4\u5982"),(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u660e\u786e\u6307\u5b9a\u805a\u5408\u6839\u5bf9\u8c61\u7684\u5904\u7406\u6a21\u5f0f\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"UPDATE_ONLY")," ",(0,l.kt)("em",{parentName:"p"},"(\u8c03\u7528",(0,l.kt)("inlineCode",{parentName:"em"},"update"),"\u800c\u975e",(0,l.kt)("inlineCode",{parentName:"em"},"save"),")"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5173\u8054\u5bf9\u8c61\u5168\u90e8\u662f\u53ea\u6709id\u7684\u77ed\u5173\u8054\u5bf9\u8c61\u3002\u4e8b\u5b9e\u4e0a\uff0c\u4f60\u53ef\u4ee5\u968f\u610f\u6539\u53d8\u5173\u8054\u5bf9\u8c61\u7684\u683c\u5f0f\uff0c\u6bd4\u5982"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u4e0d\u6307\u5b9a",(0,l.kt)("inlineCode",{parentName:"p"},"id"),"\u5c5e\u6027\uff0c\u800c\u6307\u5b9a",(0,l.kt)("inlineCode",{parentName:"p"},"key"),"\u5c5e\u6027 ",(0,l.kt)("em",{parentName:"p"},"(",(0,l.kt)(m.b,{buttonText:"\u77ed\u5173\u8054",variant:"text",mdxType:"ViewMore"},(0,l.kt)(i.k,{mdxType:"ShortAssociation"})),"\u7684\u53e6\u5916\u4e00\u79cd\u8868\u8fbe\u65b9\u5f0f)"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u6307\u5b9a",(0,l.kt)("inlineCode",{parentName:"p"},"key"),"\u5c5e\u6027\u4ee5\u53ca\u4e00\u4e9b\u65e2\u975e",(0,l.kt)("inlineCode",{parentName:"p"},"id"),"\u4e5f\u975e",(0,l.kt)("inlineCode",{parentName:"p"},"key"),"\u7684\u5c5e\u6027 ",(0,l.kt)("em",{parentName:"p"},"(",(0,l.kt)(m.b,{buttonText:"\u957f\u5173\u8054",variant:"text",mdxType:"ViewMore"},(0,l.kt)(p._,{mdxType:"LongAssociation"})),")")))),(0,l.kt)("admonition",{parentName:"li",type:"note"},(0,l.kt)("p",{parentName:"admonition"},"\u77ed\u5173\u8054\u548c\u957f\u5173\u8054\u8fd9\u4e24\u4e2a\u6982\u5ff5\u5df2\u7ecf\u8ba8\u8bba\u8fc7\uff0c\u5982\u679c\u5fd8\u8bb0\uff0c\u8bf7\u56de\u987e",(0,l.kt)("a",{parentName:"p",href:"./association#%E5%85%B3%E8%81%94%E7%B1%BB%E5%9E%8B"},"\u4fdd\u5b58\u5173\u8054"))))),(0,l.kt)("p",{parentName:"admonition"},"\u672c\u6587\u5982\u6b64\u7b80\u5316\u7684\u4f8b\u5b50\uff0c\u53ea\u662f\u4e3a\u4e86\u8ba9\u4fdd\u5b58\u6307\u4ee4\u751f\u6210\u7684SQL\u5c3d\u53ef\u80fd\u7b80\u5355\uff0c\u8ba9\u8bfb\u8005\u80fd\u5feb\u901f\u660e\u767d\u8131\u94a9\u64cd\u4f5c\u7684\u7279\u6027\u3002"),(0,l.kt)("p",{parentName:"admonition"},"\u81f3\u4e8e\u683c\u5f0f\u66f4\u590d\u6742\u7684\u5173\u8054\u5bf9\u8c61\uff0c\u8bfb\u8005\u53ef\u4ee5\u81ea\u884c\u5c1d\u8bd5\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u53c2\u8003\u5b98\u65b9\u4f8b\u5b50",(0,l.kt)("a",{parentName:"p",href:"https://github.com/babyfish-ct/jimmer/tree/main/example/java/save-command"},"example/java/save-command"),"\u6216",(0,l.kt)("a",{parentName:"p",href:"https://github.com/babyfish-ct/jimmer/tree/main/example/kotlin/save-command-kt"},"example/kotlin/save-command-kt"),"\u3002\u4f46\u8fd9\u4e9b\u529f\u80fd\u4ecd\u7136\u5b58\u5728\uff0c\u65e0\u5916\u4e4e\u751f\u6210SQL\u8bed\u53e5\u66f4\u591a\uff0c\u88ab\u9690\u85cf\u7684\u7ec6\u8282\u66f4\u7e41\u7410\u800c\u5df2\u3002")))}h.isMDXComponent=!0}}]);