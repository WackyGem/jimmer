---
sidebar_position: 5
title: Validation
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Validation is an incidental feature of jimmer objects that ensures that object data conforms to business rules.

:::info
The validation of the jimmer object is directly hard-coded in the source code generated by the Annotation Processor. Once the Annotation Procssor is completed, it has a complete validation function without any framework-level interception and performance overhead.
:::

## Nullity

:::tip
Kotlin support null safety, `T` means non-null, `T?` means nullable, it's very precise, no problem.

So this section is wrote for java, kotlin devloper can skip it.
:::

Java API uses the following means to determine whether a property is nullable.

For any property defined in the jimmer immutable data interface, the Annotation Processor will first make two sub-judgments

1. Any one of these rules is satisfied, it is judged to be non-null

    - Is it decorated with `@javax.validation.constraints.NotNull`?
    - Is it decorated with `@org.jetbrains.annotations.NotNull`?
    - Is it decorated with `@org.springframework.lang.NonNull`?
    - Is it decorated with `@org.babyfish.jimmer.sql.Id`(This is content of the jimmer-sql, will not discuss it here)?
    - Is it a list property?
    - Is its type one of the primitive types `boolean`, `char`, `byte`, `short`, `int`, `long`, `float` and `double`?

2. Any one of these rules is satisfied, it is judged to be nullable

    - Is it decorated with `@javax.validation.constraints.Null`?
    - Is it decorated with `@org.jetbrains.annotations.Nullable`?
    - Is it decorated with `@org.springframework.lang.Nullable`?
    - Is it a many-to-one association based on the middle table(This is content of the jimmer-sql, will not discuss it here).
    - Is its type one of the boxed types `java.lang.Boolean`, `java.lang.Character`, `java.lang.Byte`, `java.lang.Short`, `java.lang.Integer`, `java One of .lang.Long`, `java.lang.Float` and `java.lang.Double`?

Finally, merge sub-judgments.

- If it is judged to be both non-null and nullable, AnnotationProcessor will report an error, telling the user that the immutable interface declaration contains contradictory configuration.
- If it is only judged to be non-null, but not nullable, the property is non-null.
- If it is only judged to be nullable, but not non-null, the property is nullable.
- If it is judged to be neither non-null nor nullable, refer to the value of the annotation `@org.babyfish.jimmer.Immutable` of the interface.
     - If the interface is decorated with the annotation `@Immutable` and its `value` is `NULLABLE`, the property is nullable.
     - Otherwise, the property is non-null.

:::tip
For kotlin, the value of `@Immutable` is always ignored.
:::

## Other validation

In addition to Nullity, jimmer implements partial JSR380 validation. As of now, the supported validation rules are

- Any custom validation annotation, the custom annotation itself needs to be decorated by `@javax.validation.constraints.Constraint`
- `@javax.validation.constraints.NotEmpty`
- `@javax.validation.constraints.NotBlank`
- `@javax.validation.constraints.Size`
- `@javax.validation.constraints.Min`
- `@javax.validation.constraints.Max`
- `@javax.validation.constraints.Positive`
- `@javax.validation.constraints.MositiveOrZero`
- `@javax.validation.constraints.Negative`
- `@javax.validation.constraints.NegativeOrZero`
- `@javax.validation.constraints.Email`
- `@javax.validation.constraints.Pattern`

<Tabs groupId="language">
<TabItem value="java" label="Java">

```java
@Immutable
public interface Car {

    @Min(60)
    @Max(2000)
    int hp();
}
```

</TabItem>
<TabItem value="kotlin" label="Kotlin">

```kotlin
@Immutable
public interface Car {

    val hp: @Min(60) @Max(2000) Int
}
```

</TabItem>
</Tabs>

:::note
Subsequent versions will continue to improve this function, and the supported rules will gradually increase.
:::